#
# use to build DCMTK on Windows prior to building ITK
cmake_minimum_required(VERSION 2.8)
Project(WindowsDCMTK)

include(${CMAKE_CURRENT_LIST_DIR}/../DCMTKGitTag.cmake)

include(ExternalProject)


if(MSVC)
  list(APPEND DCMTK_EP_FLAGS -DDCMTK_OVERWRITE_WIN32_COMPILER_FLAGS:BOOL=OFF)
endif()

set(DCMTK_EPNAME DCMTK)

ExternalProject_add(${DCMTK_EPNAME}
  GIT_REPOSITORY ${DCMTK_GIT_REPOSITORY}
  GIT_TAG ${DCMTK_GIT_TAG}
  SOURCE_DIR ${DCMTK_EPNAME}
  BINARY_DIR ${DCMTK_EPNAME}-build
  UPDATE_COMMAND ""
  INSTALL_COMMAND ""
  CMAKE_ARGS
  -DDCMTK_WITH_PRIVATE_TAGS:BOOL=ON
  -DBUILD_SHARED_LIBS:BOOL=OFF
  -DDCMTK_WITH_DOXYGEN:BOOL=OFF
  -DDCMTK_WITH_ZLIB:BOOL=OFF
  -DDCMTK_WITH_OPENSSL:BOOL=OFF
  -DDCMTK_WITH_PNG:BOOL=OFF
  -DDCMTK_WITH_TIFF:BOOL=OFF
  -DDCMTK_WITH_XML:BOOL=OFF
  -DDCMTK_WITH_ICONV:BOOL=OFF
  -DDCMTK_OVERWRITE_WIN32_COMPILER_FLAGS:BOOL=OFF
)
